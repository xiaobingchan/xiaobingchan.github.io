<!DOCTYPE html>
<html lang="en-us">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    
    <meta property="og:site_name" content="青年夏日IT">
    <meta property="og:type" content="article">

    
    <meta property="og:image" content="https://qnxr.xyz/img/home-bg-jeep.jpg">
    <meta property="twitter:image" content="https://qnxr.xyz/img/home-bg-jeep.jpg" />
    

    
    <meta name="title" content="在 Windows 下使用 WSL2 搭建 Kubernetes 集群" />
    <meta property="og:title" content="在 Windows 下使用 WSL2 搭建 Kubernetes 集群" />
    <meta property="twitter:title" content="在 Windows 下使用 WSL2 搭建 Kubernetes 集群" />
    

    
    <meta name="description" content="青年夏日，程序员, 开源爱好者，生活探险家 | 这里是 青年夏日 的博客，与你一起发现更大的世界。">
    <meta property="og:description" content="青年夏日，程序员, 开源爱好者，生活探险家 | 这里是 青年夏日 的博客，与你一起发现更大的世界。" />
    <meta property="twitter:description" content="青年夏日，程序员, 开源爱好者，生活探险家 | 这里是 青年夏日 的博客，与你一起发现更大的世界。" />
    

    
    <meta property="twitter:card" content="summary" />
    
    

    <meta name="keyword"  content="青年夏日, 博客, 个人网站, 互联网, Web, 云原生, PaaS, Istio, Kubernetes, 微服务, Microservice">
    <link rel="shortcut icon" href="/img/favicon.ico">

    <title>在 Windows 下使用 WSL2 搭建 Kubernetes 集群-青年夏日IT</title>

    <link rel="canonical" href="/post/deploy-k8s-on-win-use-wsl2/">

    <link rel="stylesheet" href="/css/iDisqus.min.css"/>

    
    <link rel="stylesheet" href="/css/bootstrap.min.css">

    
    <link rel="stylesheet" href="/css/hux-blog.min.css">

    
    <link rel="stylesheet" href="/css/zanshang.css">

    
    <link href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css" rel="stylesheet" type="text/css">

    
    

    
    
    <script src="/js/jquery.min.js"></script>

    
    <script src="/js/bootstrap.min.js"></script>

    
    <script src="/js/hux-blog.min.js"></script>

    
    

</head>



<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">青年夏日IT</a>
        </div>

        
        
        <div id="huxblog_navbar">
            <div class="navbar-collapse">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="/">Home</a>
                    </li>
                    
                        
                        <li>
                            <a href="/categories/life">life</a>
                        </li>
                        
                        <li>
                            <a href="/categories/note">note</a>
                        </li>
                        
                        <li>
                            <a href="/categories/tech">tech</a>
                        </li>
                        
                        <li>
                            <a href="/categories/tips">tips</a>
                        </li>
                        
                    
                    
		    
                        <li><a href="/top/books/">BOOKS</a></li>
                    
                        <li><a href="/top/about/">ABOUT</a></li>
                    

                    
		    <li>
                        <a href="/search">SEARCH <img src="/img/search.png" height="15" style="cursor: pointer;" alt="Search"></a>
		    </li>
                    
                </ul>
            </div>
        </div>
        
    </div>
    
</nav>
<script>
    
    
    
    var $body   = document.body;
    var $toggle = document.querySelector('.navbar-toggle');
    var $navbar = document.querySelector('#huxblog_navbar');
    var $collapse = document.querySelector('.navbar-collapse');

    $toggle.addEventListener('click', handleMagic)
    function handleMagic(e){
        if ($navbar.className.indexOf('in') > 0) {
        
            $navbar.className = " ";
            
            setTimeout(function(){
                
                if($navbar.className.indexOf('in') < 0) {
                    $collapse.style.height = "0px"
                }
            },400)
        }else{
        
            $collapse.style.height = "auto"
            $navbar.className += " in";
        }
    }
</script>




<style type="text/css">
    header.intro-header {
        background-image: url('/img/home-bg-jeep.jpg')
    }
</style>
<header class="intro-header">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <div class="tags">
                        
                        <a class="tag" href="/tags/kubernetes" title="kubernetes">
                            kubernetes
                        </a>
                        
                        <a class="tag" href="/tags/wsl" title="wsl">
                            wsl
                        </a>
                        
                        <a class="tag" href="/tags/kind" title="kind">
                            kind
                        </a>
                        
                    </div>
                    <h1>在 Windows 下使用 WSL2 搭建 Kubernetes 集群</h1>
                    <h2 class="subheading"></h2>
                    <span class="meta">
                        Posted by 
                        
                                青年夏日IT
                         
                        on 
                        Wednesday, June 10, 2020
                        
                        
                        
                    </span>
                </div>
            </div>
        </div>
    </div>
</header>




<article>
    <div class="container">
        <div class="row">

            
            <div class="
                col-lg-11 col-lg-offset-1
                col-md-10 col-md-offset-1
                post-container">

                
                <header>
                    <h2>TOC</h2>
                </header>
                <nav id="TableOfContents">
  <ul>
    <li><a href="#安装-wsl2">安装 WSL2</a>
      <ul>
        <li><a href="#环境准备">环境准备</a></li>
        <li><a href="#安装配置-linux-发行版"><strong>安装配置 Linux 发行版</strong></a></li>
      </ul>
    </li>
    <li><a href="#安装-docker">安装 Docker</a></li>
    <li><a href="#安装-kubernetes">安装 Kubernetes</a></li>
  </ul>
</nav>
                
                <p>本文我们将介绍如何在 Windows10 下使用 WSL2 和 KinD 来搭建一套 Kubernetes 集群。在过去几年，Kubernetes 已经成为了容器编排领域事实上的标准。虽然现在已经有各种各样的 Kubernetes 发行版本和安装程序来部署 Kubernetes 环境了，除了云环境或者裸机环境下面之外，我们仍然需要在本地部署和运行 Kubernetes 集群，特别是对于相关的开发人员。</p>
<p>但是 Kubernetes 最开始是被设计在 Linux 环境中来部署和使用的，然而还是有不少用户平时工作还是使用的是 Windows 操作系统，为了降低 Windows 用户使用 Linux 的困难程度，微软推出了 WSL (Windows Subsystem for Linux)，该工具相当于一个运行在 Windows 下面的 Linux 子系统，这让 Windows 和 Linux 之间的环境界限变得更加不明显了，特别是 WSL2 版本推出以后，完全具有了在 WSL2 中运行 Docker 的能力了，所以现在我们几乎可以无缝地在 WSL2 上面运行 Kubernetes。</p>
<p>下面我们就来简要介绍下在 Windows10 下面如何安装和配置 WSL2 以及 Kubernetes 集群。</p>
<h1 id="安装-wsl2">安装 WSL2</h1>
<p>首先我们需要先启用&quot;适用于 Linux 的 Windows 子系统&quot;这个功能，然后才能在 Windows 上安装 Linux 发行版。以管理员身份打开 PowerShell 运行如下所示的命令：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">dism.exe /online /enable-feature /featurename:Microsoft-Windows-Subsystem-Linux /all /norestart
</code></pre></div><p>如果我们只是安装 WSL1 的话，执行完上面的命令重启计算机然后安装对应的 Linux 发行版即可，如果需要安装到 WSL2 则需要执行下面的其他额外操作。</p>
<h2 id="环境准备">环境准备</h2>
<h3 id="操作系统版本">操作系统版本</h3>
<p>如果要更新到 WSL2，首先需要满足下面的条件：</p>
<ul>
<li>Windows 10 操作系统（<a href="ms-settings:windowsupdate">已更新到版本 2004</a> 的<strong>内部版本 19041</strong> 或更高版本）</li>
<li>通过按 Windows 徽标键 + R，检查你的 Windows 版本，然后键入 <strong>winver</strong>，选择“确定”。 （或者在 Windows 命令提示符下输入 <code>ver</code> 命令）。 如果内部版本低于 19041，请<a href="ms-settings:windowsupdate">更新到最新的 Windows 版本</a>。</li>
</ul>
<p>
  <img src="https://bxdc-static.oss-cn-beijing.aliyuncs.com/images/20200610124047.png" alt="windows 版本">

</p>
<blockquote>
<p>升级 Windows 可以使用官方的更新助手，非常方便，地址：<a href="https://www.microsoft.com/en-us/software-download/windows10">https://www.microsoft.com/en-us/software-download/windows10</a></p>
</blockquote>
<h3 id="启用虚拟机平台可选组件"><strong>启用“虚拟机平台”可选组件</strong></h3>
<p>安装 WSL 2 之前，还必须启用“虚拟机平台”可选功能。以管理员身份打开 PowerShell 并运行如下所示命令：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">dism.exe /online /enable-feature /featurename:VirtualMachinePlatform /all /norestart
</code></pre></div><p><strong>重新启动</strong>计算机，以完成 WSL 安装并更新到 WSL2。</p>
<blockquote>
<p>还有一个前提条件是需要开启硬件层面的虚拟化，可以通过 BIOS 进入开启。</p>
</blockquote>
<h3 id="将-wsl2-设置为默认版本"><strong>将 WSL2 设置为默认版本</strong></h3>
<p>安装新的 Linux 分发版时，请在 Powershell 中运行以下命令，以将 WSL 2 设置为默认版本：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">wsl --set-default-version <span style="color:#bd93f9">2</span>
</code></pre></div><h2 id="安装配置-linux-发行版"><strong>安装配置 Linux 发行版</strong></h2>
<ol>
<li>
<p>打开 <a href="https://aka.ms/wslstore">Microsoft Store</a>，搜索 Terminal，安装 Windows Terminal，用于后面和 WSL 子系统交互。</p>
<p>
  <img src="https://bxdc-static.oss-cn-beijing.aliyuncs.com/images/20200610124851.png" alt="安装 windows terminal">

</p>
</li>
<li>
<p>搜索 Ubuntu，选择安装。</p>
<p>
  <img src="https://bxdc-static.oss-cn-beijing.aliyuncs.com/images/20200610125008.png" alt="安装 Ubuntu">

</p>
</li>
</ol>
<p>安装完成后，第一次打开 Ubuntu 的时候，将打开一个控制台窗口，会等待几分钟来进行配置，启动完成后为 Ubuntu 创建一个用户和密码。</p>
<p>然后我们就可以使用 Windows Terminal 来操作 Ubuntu 系统了，在 Windows Terminal 中选择 Ubuntu 发行版就可以跳转到 Ubuntu 终端中，使用上面我们配置的用户名和密码登录即可：</p>
<p>
  <img src="https://bxdc-static.oss-cn-beijing.aliyuncs.com/images/20200610125458.png" alt="Powershell">

</p>
<p>由于默认情况下我们不知道 root 用户的密码，所以如果我们想要使用 root 用户的话可以使用 passwd 命令为 root 用户设置一个新的密码。</p>
<h3 id="配置-linux">配置 Linux</h3>
<p>然后可以将 Ubuntu 的软件源更换成阿里云的源：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">root@k8s:~# cp /etc/apt/sources.list /etc/apt/sources.list.bak
root@k8s:~# <span style="color:#8be9fd;font-style:italic">echo</span> <span style="color:#f1fa8c">&#34;deb http://mirrors.aliyun.com/ubuntu/ focal main restricted
</span><span style="color:#f1fa8c">deb http://mirrors.aliyun.com/ubuntu/ focal-updates main restricted
</span><span style="color:#f1fa8c">deb http://mirrors.aliyun.com/ubuntu/ focal universe
</span><span style="color:#f1fa8c">deb http://mirrors.aliyun.com/ubuntu/ focal-updates universe
</span><span style="color:#f1fa8c">deb http://mirrors.aliyun.com/ubuntu/ focal multiverse
</span><span style="color:#f1fa8c">deb http://mirrors.aliyun.com/ubuntu/ focal-updates multiverse
</span><span style="color:#f1fa8c">deb http://mirrors.aliyun.com/ubuntu/ focal-backports main restricted universe multiverse
</span><span style="color:#f1fa8c">deb http://mirrors.aliyun.com/ubuntu/ focal-security main restricted
</span><span style="color:#f1fa8c">deb http://mirrors.aliyun.com/ubuntu/ focal-security universe
</span><span style="color:#f1fa8c">deb http://mirrors.aliyun.com/ubuntu/ focal-security multiverse&#34;</span> &gt; /etc/apt/sources.list
root@k8s:~#
</code></pre></div><p>然后执行更新即可：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">root@k8s:~# apt update <span style="color:#ff79c6">&amp;&amp;</span> apt upgrade -y
</code></pre></div><p>此外我们还可以对终端进行配置，比如将终端替换成 zsh：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#6272a4"># 安装 zsh</span>
root@k8s:~# apt-get install zsh
</code></pre></div><p><code>oh-my-zsh</code>可以用于快速配置<code>zsh</code>，进入<a href="https://ohmyz.sh/">官网</a>或者 <a href="https://github.com/ohmyzsh/ohmyzsh">Github</a> 可以了解其基本使用及其丰富的主题使用，安装只需要执行下面代码即可：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">root@k8s:~# sh -c <span style="color:#f1fa8c">&#34;</span><span style="color:#ff79c6">$(</span>curl -fsSL https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh<span style="color:#ff79c6">)</span><span style="color:#f1fa8c">&#34;</span>
</code></pre></div><p>安装<code>zsh-syntax-higlighting</code>语法高亮插件：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">root@k8s:~# git clone https://github.com/zsh-users/zsh-syntax-highlighting.git
<span style="color:#6272a4"># 移动到 plugins 文件夹中</span>
root@k8s:~# mv zsh-syntax-highlighting <span style="color:#8be9fd;font-style:italic">$ZSH_CUSTOM</span>/plugins
<span style="color:#6272a4"># 配置环境变量</span>
root@k8s:~# <span style="color:#8be9fd;font-style:italic">cd</span> ~
root@k8s:~# vim .zshrc
<span style="color:#6272a4">#在 plugins 一列中添加 zsh-syntax-highlighting，如下</span>
<span style="color:#8be9fd;font-style:italic">plugins</span><span style="color:#ff79c6">=(</span>git sh-syntax-highlighting<span style="color:#ff79c6">)</span>
<span style="color:#6272a4"># 在文件最后添加</span>
root@k8s:~# <span style="color:#8be9fd;font-style:italic">source</span> <span style="color:#8be9fd;font-style:italic">$ZSH_CUSTOM</span>/plugins/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh
<span style="color:#6272a4"># 配置生效</span>
root@k8s:~# <span style="color:#8be9fd;font-style:italic">source</span> ~/.zshrc
</code></pre></div><p>配置完成之后，Terminal 的最终效果如下图所示。</p>
<p>
  <img src="https://bxdc-static.oss-cn-beijing.aliyuncs.com/images/20200610131555.png" alt="zsh config">

</p>
<h3 id="配置-systemd">配置 Systemd</h3>
<p>由于默认情况下 WSL 中不能使用 systemd，所以很多应用程序没办法启动，不过还是有一些大神解决了这个问题，我们可以在 <a href="https://forum.snapcraft.io/t/running-snaps-on-wsl2-insiders-only-for-now/13033">https://forum.snapcraft.io/t/running-snaps-on-wsl2-insiders-only-for-now/13033</a> 链接下面找到启动 SystemD 的方法。</p>
<p>首先安装 Systemd 相关的依赖应用：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">apt install -yqq fontconfig daemonize
</code></pre></div><p>然后创建一个如下所示的脚本文件：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#6272a4"># Create the starting script for SystemD</span>
vi /etc/profile.d/00-wsl2-systemd.sh
<span style="color:#8be9fd;font-style:italic">SYSTEMD_PID</span><span style="color:#ff79c6">=</span><span style="color:#ff79c6">$(</span>ps -ef | grep <span style="color:#f1fa8c">&#39;/lib/systemd/systemd --system-unit=basic.target$&#39;</span> | grep -v unshare | awk <span style="color:#f1fa8c">&#39;{print $2}&#39;</span><span style="color:#ff79c6">)</span>

<span style="color:#ff79c6">if</span> <span style="color:#ff79c6">[</span> -z <span style="color:#f1fa8c">&#34;</span><span style="color:#8be9fd;font-style:italic">$SYSTEMD_PID</span><span style="color:#f1fa8c">&#34;</span> <span style="color:#ff79c6">]</span>; <span style="color:#ff79c6">then</span>
   sudo /usr/bin/daemonize /usr/bin/unshare --fork --pid --mount-proc /lib/systemd/systemd --system-unit<span style="color:#ff79c6">=</span>basic.target
   <span style="color:#8be9fd;font-style:italic">SYSTEMD_PID</span><span style="color:#ff79c6">=</span><span style="color:#ff79c6">$(</span>ps -ef | grep <span style="color:#f1fa8c">&#39;/lib/systemd/systemd --system-unit=basic.target$&#39;</span> | grep -v unshare | awk <span style="color:#f1fa8c">&#39;{print $2}&#39;</span><span style="color:#ff79c6">)</span>
<span style="color:#ff79c6">fi</span>

<span style="color:#ff79c6">if</span> <span style="color:#ff79c6">[</span> -n <span style="color:#f1fa8c">&#34;</span><span style="color:#8be9fd;font-style:italic">$SYSTEMD_PID</span><span style="color:#f1fa8c">&#34;</span> <span style="color:#ff79c6">]</span> <span style="color:#ff79c6">&amp;&amp;</span> <span style="color:#ff79c6">[</span> <span style="color:#f1fa8c">&#34;</span><span style="color:#8be9fd;font-style:italic">$SYSTEMD_PID</span><span style="color:#f1fa8c">&#34;</span> !<span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;1&#34;</span> <span style="color:#ff79c6">]</span>; <span style="color:#ff79c6">then</span>
    <span style="color:#8be9fd;font-style:italic">exec</span> sudo /usr/bin/nsenter -t <span style="color:#8be9fd;font-style:italic">$SYSTEMD_PID</span> -a su - <span style="color:#8be9fd;font-style:italic">$LOGNAME</span>
<span style="color:#ff79c6">fi</span>
</code></pre></div><p>上面的脚本放置在 /etc/profile.d 目录下面，所以要让脚本生效，我们需要退出当前 session，重新进入即可。</p>
<p>
  <img src="https://bxdc-static.oss-cn-beijing.aliyuncs.com/images/20200610141914.png" alt="wsl2 systemd">

</p>
<p>到这里我们就完成了 WSL2 的安装和配置。</p>
<h1 id="安装-docker">安装 Docker</h1>
<p>其实现在我们已经可以直接在 WSL 中去安装 Docker 了，和平时在 Linux 下面操作方式是一样的。但实际上 Docker 也专门开发了可以使用 <code>WSL2</code> 中的 <code>Docker</code> 守护进程的桌面管理程序, 打开 <a href="https://docs.docker.com/docker-for-windows/wsl-tech-preview/">Docker Desktop WSL2 backend</a> 页面，下载最新的 Docker Desktop for Windows 程序 ，安装之后，打开程序做如下设置</p>
<ul>
<li>
<p>启用基于<code>WSL2</code>的引擎复选框（<code>Use the WSL 2 based engine）</code></p>
<p>
  <img src="https://bxdc-static.oss-cn-beijing.aliyuncs.com/images/20200610142842.png" alt="docker use wsl2">

</p>
<p>这个时候在 WSL 里面执行 docker 命令还是找不到的：</p>
<p>
  <img src="https://bxdc-static.oss-cn-beijing.aliyuncs.com/images/WX20200610-102450@2x.png" alt="select wsl2">

</p>
</li>
<li>
<p>我们还需要在 Resources 中设置要从哪个 WSL2 发行版中访问 Docker，如下图使用的是 Ubuntu-20.04：</p>
<p>
  <img src="https://bxdc-static.oss-cn-beijing.aliyuncs.com/images/WX20200610-102506@2x.png" alt="wsl2">

</p>
</li>
<li>
<p>然后记住重启 Docker for Windows，重启完成后我们就可以在 WSL 里面使用 docker 命令了：</p>
<p>
  <img src="https://bxdc-static.oss-cn-beijing.aliyuncs.com/images/WX20200610-103321@2x.png" alt="docker cli">

</p>
</li>
</ul>
<p>到这里 Docker 和 WSL2 的基本配置就完成了，接下来我们来安装 Kubernetes 集群。</p>
<!-- raw HTML omitted -->
<h1 id="安装-kubernetes">安装 Kubernetes</h1>
<p>安装 Kubernetes 集群有很多成熟的方案，在本地搭建也有 minikube、microk8s 等等，我们这里选择使用 KinD：在容器中来运行 Kubernetes 的一种简单方式。这里我们将安装 KinD 官方网站的说明（<a href="https://kind.sigs.k8s.io/docs/user/quick-start/">https://kind.sigs.k8s.io/docs/user/quick-start/</a>）来进行操作。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#6272a4"># 下载 KinD 二进制文件</span>
curl -Lo ./kind https://github.com/kubernetes-sigs/kind/releases/download/v0.8.1/kind-<span style="color:#ff79c6">$(</span>uname<span style="color:#ff79c6">)</span>-amd64
<span style="color:#6272a4"># 标记为可执行文件</span>
chmod +x ./kind
<span style="color:#6272a4"># 移动到 PATH 目录下去</span>
mv ./kind /usr/local/bin/
<span style="color:#6272a4"># TODO，记得提前下载安装 kubectl 二进制文件</span>
</code></pre></div><p>
  <img src="https://bxdc-static.oss-cn-beijing.aliyuncs.com/images/WX20200610-104349@2x.png" alt="https://bxdc-static.oss-cn-beijing.aliyuncs.com/images/WX20200610-104349@2x.png">

</p>
<p>KinD 获取后，我们就可以来创建 Kubernetes 集群了</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#6272a4"># 检查是否设置了 KUBECONFIG 环境变量</span>
<span style="color:#8be9fd;font-style:italic">echo</span> <span style="color:#8be9fd;font-style:italic">$KUBECONFIG</span>
<span style="color:#6272a4"># 检查是否存在 .kube 目录，不需要手动创建</span>
ls <span style="color:#8be9fd;font-style:italic">$HOME</span>/.kube
<span style="color:#6272a4"># 使用 kind 命令创建一个名为 wslk8s 的集群</span>
kind create cluster --name wslk8s
<span style="color:#6272a4"># 创建后检查 .kube 目录</span>
ls <span style="color:#8be9fd;font-style:italic">$HOME</span>/.kube
</code></pre></div><p>
  <img src="https://bxdc-static.oss-cn-beijing.aliyuncs.com/images/WX20200610-104843@2x.png" alt="KinD 安装">

</p>
<p>到这里集群就创建成功了，我们也可以在 Windows 的浏览器中打开上面的 <code>Kubernetes master</code> 地址：</p>
<p>
  <img src="https://bxdc-static.oss-cn-beijing.aliyuncs.com/images/WX20200610-104934@2x.png" alt="k8s master">

</p>
<p>这就是 Docker Desktop for Windows 与 WSL2 后台结合的真正优势，比之前 Docker 默认的方式性能要好很多。</p>
<p>到这里我们就成功创建了一个单节点的 Kubernetes 集群：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#6272a4"># 检查节点</span>
kubectl get nodes
<span style="color:#6272a4"># 获取所有 namespace 下面的资源对象</span>
kubectl get all --all-namespaces
</code></pre></div><p>
  <img src="https://bxdc-static.oss-cn-beijing.aliyuncs.com/images/WX20200610-110237@2x.png" alt="k8s 资源">

</p>
<p>对于大部分使用者来说，本地运行一个节点的集群已经足够了，当然如果只需要一个节点，我们也完全可以使用 minikube。同样我们也可以使用 KinD 来创建一个多节点的集群：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#6272a4"># 删除现在的集群</span>
kind delete cluster --name wslk8s
<span style="color:#6272a4"># 创建一个3节点集群的配置文件</span>
cat <span style="color:#f1fa8c">&lt;&lt; EOF &gt; kind-3nodes.yaml
</span><span style="color:#f1fa8c">kind: Cluster
</span><span style="color:#f1fa8c">apiVersion: kind.x-k8s.io/v1alpha4
</span><span style="color:#f1fa8c">nodes:
</span><span style="color:#f1fa8c">  - role: control-plane
</span><span style="color:#f1fa8c">  - role: worker
</span><span style="color:#f1fa8c">  - role: worker
</span><span style="color:#f1fa8c">EOF</span>
<span style="color:#6272a4"># 使用配置文件创建新的集群</span>
kind create cluster --name wslkindmultinodes --config ./kind-3nodes.yaml
<span style="color:#6272a4"># 获取集群节点</span>
kubectl get nodes
</code></pre></div><p>
  <img src="https://bxdc-static.oss-cn-beijing.aliyuncs.com/images/WX20200610-111246@2x.png" alt="k8s 集群">

</p>
<p>可以看到我们这里就成功运行了3个 v1.18.2 版本的 Kubernetes 节点，而且这些节点都是运行在 Docker 容器中的，我们可以通过 docker ps 命令查看，就类似于 Kubernetes 运行在 Docker 容器中，所以叫做 KinD：</p>
<p>
  <img src="https://bxdc-static.oss-cn-beijing.aliyuncs.com/images/20200610145436.png" alt="docker ps">

</p>
<p>现在我们也可以去查看下整个集群的资源对象：</p>
<p>
  <img src="https://bxdc-static.oss-cn-beijing.aliyuncs.com/images/WX20200610-111438@2x.png" alt="k8s 资源">

</p>
<p>当然同样我们也可以在集群中部署应用，比如安装一个 Kubernetes Dashboard：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#6272a4"># 在集群中安装 Dashboard</span>
kubectl apply -f https://raw.githubusercontent.com/kubernetes/dashboard/v2.0.1/aio/deploy/recommended.yaml
<span style="color:#6272a4"># 获取 dashboard 的资源对象</span>
kubectl get all -n kubernetes-dashboard
</code></pre></div><p>安装成功后，我们可以使用如下命令创建一个临时的代理：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ kubectl proxy
</code></pre></div><p>然后在 Windows 浏览器中我们可以通过如下地址来访问 Dashboard 服务：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">http://localhost:8001/api/v1/namespaces/kubernetes-dashboard/services/https:kubernetes-dashboard:/proxy/
</code></pre></div><p>
  <img src="https://bxdc-static.oss-cn-beijing.aliyuncs.com/images/WX20200610-115328@2x.png" alt="k8s dashboard">

</p>
<p>然后我们使用官方推荐的 RBAC 方式来创建一个 Token 进行登录，重新打开一个 WSL2 终端，执行如下所示命令：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#6272a4"># 创建一个新的 ServiceAccount</span>
kubectl apply -f - <span style="color:#f1fa8c">&lt;&lt;EOF
</span><span style="color:#f1fa8c">apiVersion: v1
</span><span style="color:#f1fa8c">kind: ServiceAccount
</span><span style="color:#f1fa8c">metadata:
</span><span style="color:#f1fa8c">  name: admin-user
</span><span style="color:#f1fa8c">  namespace: kubernetes-dashboard
</span><span style="color:#f1fa8c">EOF</span>
<span style="color:#6272a4"># 将上面的 SA 绑定到系统的 cluster-admin 这个集群角色上</span>
kubectl apply -f - <span style="color:#f1fa8c">&lt;&lt;EOF
</span><span style="color:#f1fa8c">apiVersion: rbac.authorization.k8s.io/v1
</span><span style="color:#f1fa8c">kind: ClusterRoleBinding
</span><span style="color:#f1fa8c">metadata:
</span><span style="color:#f1fa8c">  name: admin-user
</span><span style="color:#f1fa8c">roleRef:
</span><span style="color:#f1fa8c">  apiGroup: rbac.authorization.k8s.io
</span><span style="color:#f1fa8c">  kind: ClusterRole
</span><span style="color:#f1fa8c">  name: cluster-admin
</span><span style="color:#f1fa8c">subjects:
</span><span style="color:#f1fa8c">- kind: ServiceAccount
</span><span style="color:#f1fa8c">  name: admin-user
</span><span style="color:#f1fa8c">  namespace: kubernetes-dashboard
</span><span style="color:#f1fa8c">EOF</span>
</code></pre></div><p>然后接下来我们可以通过上面创建的 ServiceAccount 来获取 Token 信息：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">kubectl -n kubernetes-dashboard describe secret <span style="color:#ff79c6">$(</span>kubectl -n kubernetes-dashboard get secret | grep admin-user | awk <span style="color:#f1fa8c">&#39;{print $1}&#39;</span><span style="color:#ff79c6">)</span>
<span style="color:#6272a4"># 拷贝上面命令获取到的 Token 数据 </span>
</code></pre></div><p>
  <img src="https://bxdc-static.oss-cn-beijing.aliyuncs.com/images/20200610150610.png" alt="获取 Token">

</p>
<p>将上面获取到的 token 数据拷贝到 Dashboard 登录页面进行登录即可：</p>
<p>
  <img src="https://bxdc-static.oss-cn-beijing.aliyuncs.com/images/WX20200610-115823@2x.png" alt="k8s dashboard">

</p>
<p>到这里我们就完成了在 Windows 系统下面使用 WSL2 + KinD 来搭建 Kubernetes 集群，对于本地开发测试来说非常方便。当然 WSL2 目前还是有一些小问题，比如不能通过局域网访问到 WSL2 里面的服务，当然也有一些解决方案，但是都不优雅，每次重启机器过后 WSL2 的 IP 都会变化，所以有时候也非常不方便，不过整体来说 WSL2 还是非常香的。</p>
<!-- raw HTML omitted -->

                
                
<div class="entry-shang text-center">
    
	    <p> 「如果这篇文章对你有用,请随意打赏」</p>
	
	<button class="zs show-zs btn btn-bred">赞赏支持</button>
</div>
<div class="zs-modal-bg"></div>
<div class="zs-modal-box">
	<div class="zs-modal-head">
		<button type="button" class="close">×</button>
		<span class="author"><a href="https://qnxr.xyz"><img src="/img/favicon.png" />青年夏日IT</a></span>
        
	        <p class="tip"><i></i><span>如果这篇文章对你有用,请随意打赏</span></p>
		
 
	</div>
	<div class="zs-modal-body">
		<div class="zs-modal-btns">
			<button class="btn btn-blink" data-num="2">2元</button>
			<button class="btn btn-blink" data-num="5">5元</button>
			<button class="btn btn-blink" data-num="10">10元</button>
			<button class="btn btn-blink" data-num="50">50元</button>
			<button class="btn btn-blink" data-num="100">100元</button>
			<button class="btn btn-blink" data-num="1">任意金额</button>
		</div>
		<div class="zs-modal-pay">
			<button class="btn btn-bred" id="pay-text">2元</button>
			<p>使用<span id="pay-type">微信</span>扫描二维码完成支付</p>
			<img src="/img/reward/wechat-2.png"  id="pay-image"/>
		</div>
	</div>
	<div class="zs-modal-footer">
		<label><input type="radio" name="zs-type" value="wechat" class="zs-type" checked="checked"><span ><span class="zs-wechat"><img src="/img/reward/wechat-btn.png"/></span></label>
		<label><input type="radio" name="zs-type" value="alipay" class="zs-type" class="zs-alipay"><img src="/img/reward/alipay-btn.png"/></span></label>
	</div>
</div>
<script type="text/javascript" src="/js/reward.js"></script>

                

                <hr>
                <ul class="pager">
                    
                    <li class="previous">
                        <a href="/post/use-loki-monitor-alert/" data-toggle="tooltip" data-placement="top" title="使用 Loki 进行日志监控和报警">&larr;
                            Previous Post</a>
                    </li>
                    
                    
                    <li class="next">
                        <a href="/post/k8s-in-k8s/" data-toggle="tooltip" data-placement="top" title="在 Kubernetes 中运行 Kubernetes">Next
                            Post &rarr;</a>
                    </li>
                    
                </ul>

                
<div id="disqus-comment"></div>



            </div>
            
            <div class="
                col-lg-11 col-lg-offset-1
                col-md-10 col-md-offset-1
                sidebar-container">

                
                
                <section>
                    <hr class="hidden-sm hidden-xs">
                    <h5><a href="/tags/">标签</a></h5>
                    <div class="tags">
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        <a href="/tags/affinity" title="affinity">
                            affinity
                        </a>
                        
                        
                        
                        
                        
                        <a href="/tags/alertmanager" title="alertmanager">
                            alertmanager
                        </a>
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        <a href="/tags/argo" title="argo">
                            argo
                        </a>
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        <a href="/tags/cd" title="cd">
                            cd
                        </a>
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        <a href="/tags/ci" title="ci">
                            ci
                        </a>
                        
                        
                        
                        <a href="/tags/ci/cd" title="ci/cd">
                            ci/cd
                        </a>
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        <a href="/tags/configmap" title="configmap">
                            configmap
                        </a>
                        
                        
                        
                        
                        
                        <a href="/tags/coredns" title="coredns">
                            coredns
                        </a>
                        
                        
                        
                        
                        
                        
                        
                        <a href="/tags/dashboard" title="dashboard">
                            dashboard
                        </a>
                        
                        
                        
                        <a href="/tags/deployment" title="deployment">
                            deployment
                        </a>
                        
                        
                        
                        
                        
                        <a href="/tags/devops" title="devops">
                            devops
                        </a>
                        
                        
                        
                        
                        
                        <a href="/tags/django" title="django">
                            django
                        </a>
                        
                        
                        
                        
                        
                        
                        
                        <a href="/tags/docker" title="docker">
                            docker
                        </a>
                        
                        
                        
                        <a href="/tags/dockerfile" title="dockerfile">
                            dockerfile
                        </a>
                        
                        
                        
                        
                        
                        <a href="/tags/drone" title="drone">
                            drone
                        </a>
                        
                        
                        
                        <a href="/tags/efk" title="efk">
                            efk
                        </a>
                        
                        
                        
                        <a href="/tags/elastic" title="elastic">
                            elastic
                        </a>
                        
                        
                        
                        <a href="/tags/elasticsearch" title="elasticsearch">
                            elasticsearch
                        </a>
                        
                        
                        
                        
                        
                        <a href="/tags/envoy" title="envoy">
                            envoy
                        </a>
                        
                        
                        
                        
                        
                        
                        
                        <a href="/tags/flask" title="flask">
                            flask
                        </a>
                        
                        
                        
                        <a href="/tags/fluentd" title="fluentd">
                            fluentd
                        </a>
                        
                        
                        
                        
                        
                        <a href="/tags/github" title="github">
                            github
                        </a>
                        
                        
                        
                        <a href="/tags/gitlab" title="gitlab">
                            gitlab
                        </a>
                        
                        
                        
                        
                        
                        <a href="/tags/gitops" title="gitops">
                            gitops
                        </a>
                        
                        
                        
                        
                        
                        
                        
                        <a href="/tags/goland" title="goland">
                            goland
                        </a>
                        
                        
                        
                        <a href="/tags/golang" title="golang">
                            golang
                        </a>
                        
                        
                        
                        <a href="/tags/grafana" title="grafana">
                            grafana
                        </a>
                        
                        
                        
                        
                        
                        <a href="/tags/haproxy" title="haproxy">
                            haproxy
                        </a>
                        
                        
                        
                        <a href="/tags/harbor" title="harbor">
                            harbor
                        </a>
                        
                        
                        
                        <a href="/tags/helm" title="helm">
                            helm
                        </a>
                        
                        
                        
                        
                        
                        
                        
                        <a href="/tags/https" title="https">
                            https
                        </a>
                        
                        
                        
                        <a href="/tags/hugo" title="hugo">
                            hugo
                        </a>
                        
                        
                        
                        
                        
                        <a href="/tags/ingress" title="ingress">
                            ingress
                        </a>
                        
                        
                        
                        <a href="/tags/ingress-nginx" title="ingress-nginx">
                            ingress-nginx
                        </a>
                        
                        
                        
                        
                        
                        <a href="/tags/iptables" title="iptables">
                            iptables
                        </a>
                        
                        
                        
                        <a href="/tags/ipvs" title="ipvs">
                            ipvs
                        </a>
                        
                        
                        
                        <a href="/tags/istio" title="istio">
                            istio
                        </a>
                        
                        
                        
                        <a href="/tags/java" title="java">
                            java
                        </a>
                        
                        
                        
                        
                        
                        <a href="/tags/jenkins" title="jenkins">
                            jenkins
                        </a>
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        <a href="/tags/k8s" title="k8s">
                            k8s
                        </a>
                        
                        
                        
                        <a href="/tags/k8s%E6%8A%80%E6%9C%AF%E5%9C%88" title="k8s技术圈">
                            k8s技术圈
                        </a>
                        
                        
                        
                        <a href="/tags/kafka" title="kafka">
                            kafka
                        </a>
                        
                        
                        
                        
                        
                        <a href="/tags/kibana" title="kibana">
                            kibana
                        </a>
                        
                        
                        
                        <a href="/tags/kind" title="kind">
                            kind
                        </a>
                        
                        
                        
                        <a href="/tags/kong" title="kong">
                            kong
                        </a>
                        
                        
                        
                        <a href="/tags/kubeadm" title="kubeadm">
                            kubeadm
                        </a>
                        
                        
                        
                        
                        
                        <a href="/tags/kubelet" title="kubelet">
                            kubelet
                        </a>
                        
                        
                        
                        
                        
                        <a href="/tags/kubernetes" title="kubernetes">
                            kubernetes
                        </a>
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        <a href="/tags/kustomize" title="kustomize">
                            kustomize
                        </a>
                        
                        
                        
                        
                        
                        
                        
                        <a href="/tags/loki" title="loki">
                            loki
                        </a>
                        
                        
                        
                        <a href="/tags/mac" title="mac">
                            mac
                        </a>
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        <a href="/tags/microservice" title="microservice">
                            microservice
                        </a>
                        
                        
                        
                        <a href="/tags/monitor" title="monitor">
                            monitor
                        </a>
                        
                        
                        
                        
                        
                        <a href="/tags/netfilter" title="netfilter">
                            netfilter
                        </a>
                        
                        
                        
                        <a href="/tags/nfs" title="nfs">
                            nfs
                        </a>
                        
                        
                        
                        
                        
                        <a href="/tags/nginx" title="nginx">
                            nginx
                        </a>
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        <a href="/tags/operator" title="operator">
                            operator
                        </a>
                        
                        
                        
                        <a href="/tags/ops" title="ops">
                            ops
                        </a>
                        
                        
                        
                        
                        
                        
                        
                        <a href="/tags/pipeline" title="pipeline">
                            pipeline
                        </a>
                        
                        
                        
                        
                        
                        <a href="/tags/pod" title="pod">
                            pod
                        </a>
                        
                        
                        
                        
                        
                        <a href="/tags/prometheus" title="prometheus">
                            prometheus
                        </a>
                        
                        
                        
                        
                        
                        <a href="/tags/pv" title="pv">
                            pv
                        </a>
                        
                        
                        
                        <a href="/tags/pvc" title="pvc">
                            pvc
                        </a>
                        
                        
                        
                        <a href="/tags/pycharm" title="pycharm">
                            pycharm
                        </a>
                        
                        
                        
                        
                        
                        <a href="/tags/python" title="python">
                            python
                        </a>
                        
                        
                        
                        
                        
                        
                        
                        <a href="/tags/rbac" title="rbac">
                            rbac
                        </a>
                        
                        
                        
                        <a href="/tags/react" title="react">
                            react
                        </a>
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        <a href="/tags/scheduler" title="scheduler">
                            scheduler
                        </a>
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        <a href="/tags/security" title="security">
                            security
                        </a>
                        
                        
                        
                        <a href="/tags/service" title="service">
                            service
                        </a>
                        
                        
                        
                        <a href="/tags/service-api" title="service-api">
                            service-api
                        </a>
                        
                        
                        
                        <a href="/tags/service-mesh" title="service-mesh">
                            service-mesh
                        </a>
                        
                        
                        
                        
                        
                        
                        
                        <a href="/tags/slave" title="slave">
                            slave
                        </a>
                        
                        
                        
                        
                        
                        
                        
                        <a href="/tags/storageclass" title="storageclass">
                            storageclass
                        </a>
                        
                        
                        
                        
                        
                        <a href="/tags/tcpdump" title="tcpdump">
                            tcpdump
                        </a>
                        
                        
                        
                        <a href="/tags/tdd" title="tdd">
                            tdd
                        </a>
                        
                        
                        
                        <a href="/tags/tekton" title="tekton">
                            tekton
                        </a>
                        
                        
                        
                        <a href="/tags/tips" title="tips">
                            tips
                        </a>
                        
                        
                        
                        <a href="/tags/traefik" title="traefik">
                            traefik
                        </a>
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        <a href="/tags/vault" title="vault">
                            vault
                        </a>
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        <a href="/tags/vscode" title="vscode">
                            vscode
                        </a>
                        
                        
                        
                        
                        
                        
                        
                        <a href="/tags/webpack" title="webpack">
                            webpack
                        </a>
                        
                        
                        
                        <a href="/tags/websocket" title="websocket">
                            websocket
                        </a>
                        
                        
                        
                        
                        
                        <a href="/tags/wsl" title="wsl">
                            wsl
                        </a>
                        
                        
                        
                        <a href="/tags/yaml" title="yaml">
                            yaml
                        </a>
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        <a href="/tags/%E5%BE%AE%E6%9C%8D%E5%8A%A1" title="微服务">
                            微服务
                        </a>
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        <a href="/tags/%E7%9F%A5%E8%AF%86%E6%98%9F%E7%90%83" title="知识星球">
                            知识星球
                        </a>
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        <a href="/tags/%E8%AF%BE%E7%A8%8B" title="课程">
                            课程
                        </a>
                        
                        
                        
                        <a href="/tags/%E8%B0%83%E5%BA%A6" title="调度">
                            调度
                        </a>
                        
                        
                        
                        <a href="/tags/%E9%98%BF%E9%87%8C%E4%BA%91" title="阿里云">
                            阿里云
                        </a>
                        
                        
                        
                        
                        
                        
                    </div>
                </section>
                

                
                
            </div>
        </div>
    </div>
</article>




<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                   
                    
                    <li>
                        <a href="mailto:1290851757@qq.com">
                            <span class="fa-stack fa-lg">
                                <i class="fas fa-circle fa-stack-2x"></i>
                                <i class="fas fa-envelope fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
		    

                    
                    <li>
                        <a href="img/wechat_qrcode.jpg">
                            <span class="fa-stack fa-lg">
                                <i class="fas fa-circle fa-stack-2x"></i>
                                <i class="fab fa-twitter fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    

                    
                    <li>
                        <a target="_blank" href="img/wechat_qrcode.jpg">
                            <span class="fa-stack fa-lg">
                                <i class="fas fa-circle fa-stack-2x"></i>
                                <i class="fab fa-facebook fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
		    

		    
                    
                    
                    <li>
                        <a target="_blank" href="https://github.com/xiaobingchan">
                            <span class="fa-stack fa-lg">
                                <i class="fas fa-circle fa-stack-2x"></i>
                                <i class="fab fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
		    
                    
                    
                    
                    <li>
                        <a target="_blank" href="img/alipay.jpg">
                            <span class="fa-stack fa-lg">
                                <i class="fas fa-circle fa-stack-2x"></i>
                                <i class="fab fa-linkedin fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
		    
                    
                    
                    
                    
                    
            
            
            
                </ul>
		<p class="copyright text-muted">
                    Copyright &copy; 青年夏日IT 2021
                    <br>
                    <a href="https://themes.gohugo.io/hugo-theme-cleanwhite"></a><a href="http://qnxr.xyz">青年夏日IT版权所有</a> |
                    <iframe
                        style="margin-left: 2px; margin-bottom:-5px;"
                        frameborder="0" scrolling="0" width="100px" height="20px"
                        src="https://ghbtns.com/github-btn.html?user=xiaobingchan&repo=xiaobingchan.github.io&type=star&count=true" >
                    </iframe>
                </p>
            </div>
        </div>
    </div>
</footer>




<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>






<script>
    
    if($('#tag_cloud').length !== 0){
        async("/js/jquery.tagcloud.js",function(){
            $.fn.tagcloud.defaults = {
                
                color: {start: '#bbbbee', end: '#0085a1'},
            };
            $('#tag_cloud a').tagcloud();
        })
    }
</script>


<script>
    async("https://cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.js", function(){
        var $nav = document.querySelector("nav");
        if($nav) FastClick.attach($nav);
    })
</script>






<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-150373352-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>



</body>
</html>
