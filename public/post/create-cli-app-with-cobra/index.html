<!DOCTYPE html>
<html lang="en-us">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    
    <meta property="og:site_name" content="青年夏日IT">
    <meta property="og:type" content="article">

    
    <meta property="og:image" content="https://qnxr.xyz/img/home-bg-jeep.jpg">
    <meta property="twitter:image" content="https://qnxr.xyz/img/home-bg-jeep.jpg" />
    

    
    <meta name="title" content="在 Golang 中使用 Cobra 创建 CLI 应用" />
    <meta property="og:title" content="在 Golang 中使用 Cobra 创建 CLI 应用" />
    <meta property="twitter:title" content="在 Golang 中使用 Cobra 创建 CLI 应用" />
    

    
    <meta name="description" content="青年夏日，程序员, 开源爱好者，生活探险家 | 这里是 青年夏日 的博客，与你一起发现更大的世界。">
    <meta property="og:description" content="青年夏日，程序员, 开源爱好者，生活探险家 | 这里是 青年夏日 的博客，与你一起发现更大的世界。" />
    <meta property="twitter:description" content="青年夏日，程序员, 开源爱好者，生活探险家 | 这里是 青年夏日 的博客，与你一起发现更大的世界。" />
    

    
    <meta property="twitter:card" content="summary" />
    
    

    <meta name="keyword"  content="青年夏日, 博客, 个人网站, 互联网, Web, 云原生, PaaS, Istio, Kubernetes, 微服务, Microservice">
    <link rel="shortcut icon" href="/img/favicon.ico">

    <title>在 Golang 中使用 Cobra 创建 CLI 应用-青年夏日IT</title>

    <link rel="canonical" href="/post/create-cli-app-with-cobra/">

    <link rel="stylesheet" href="/css/iDisqus.min.css"/>

    
    <link rel="stylesheet" href="/css/bootstrap.min.css">

    
    <link rel="stylesheet" href="/css/hux-blog.min.css">

    
    <link rel="stylesheet" href="/css/zanshang.css">

    
    <link href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css" rel="stylesheet" type="text/css">

    
    

    
    
    <script src="/js/jquery.min.js"></script>

    
    <script src="/js/bootstrap.min.js"></script>

    
    <script src="/js/hux-blog.min.js"></script>

    
    

</head>



<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">青年夏日IT</a>
        </div>

        
        
        <div id="huxblog_navbar">
            <div class="navbar-collapse">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="/">Home</a>
                    </li>
                    
                        
                        <li>
                            <a href="/categories/life">life</a>
                        </li>
                        
                        <li>
                            <a href="/categories/note">note</a>
                        </li>
                        
                        <li>
                            <a href="/categories/tech">tech</a>
                        </li>
                        
                        <li>
                            <a href="/categories/tips">tips</a>
                        </li>
                        
                    
                    
		    
                        <li><a href="/top/books/">BOOKS</a></li>
                    
                        <li><a href="/top/about/">ABOUT</a></li>
                    

                    
		    <li>
                        <a href="/search">SEARCH <img src="/img/search.png" height="15" style="cursor: pointer;" alt="Search"></a>
		    </li>
                    
                </ul>
            </div>
        </div>
        
    </div>
    
</nav>
<script>
    
    
    
    var $body   = document.body;
    var $toggle = document.querySelector('.navbar-toggle');
    var $navbar = document.querySelector('#huxblog_navbar');
    var $collapse = document.querySelector('.navbar-collapse');

    $toggle.addEventListener('click', handleMagic)
    function handleMagic(e){
        if ($navbar.className.indexOf('in') > 0) {
        
            $navbar.className = " ";
            
            setTimeout(function(){
                
                if($navbar.className.indexOf('in') < 0) {
                    $collapse.style.height = "0px"
                }
            },400)
        }else{
        
            $collapse.style.height = "auto"
            $navbar.className += " in";
        }
    }
</script>




<style type="text/css">
    header.intro-header {
        background-image: url('/img/home-bg-jeep.jpg')
    }
</style>
<header class="intro-header">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <div class="tags">
                        
                        <a class="tag" href="/tags/golang" title="golang">
                            golang
                        </a>
                        
                        <a class="tag" href="/tags/cobra" title="cobra">
                            cobra
                        </a>
                        
                    </div>
                    <h1>在 Golang 中使用 Cobra 创建 CLI 应用</h1>
                    <h2 class="subheading"></h2>
                    <span class="meta">
                        Posted by 
                        
                                青年夏日IT
                         
                        on 
                        Monday, March 9, 2020
                        
                        
                        
                    </span>
                </div>
            </div>
        </div>
    </div>
</header>




<article>
    <div class="container">
        <div class="row">

            
            <div class="
                col-lg-11 col-lg-offset-1
                col-md-10 col-md-offset-1
                post-container">

                
                <header>
                    <h2>TOC</h2>
                </header>
                <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#概念">概念</a></li>
        <li><a href="#示例">示例</a></li>
        <li><a href="#参考资料">参考资料</a></li>
      </ul>
    </li>
  </ul>
</nav>
                
                <p><a href="/post/create-cli-app-with-cobra/">
  <img src="https://bxdc-static.oss-cn-beijing.aliyuncs.com/images/20200309153711.png" alt="create CLI app with cobra">

</a></p>
<p>虽然现在我们使用的大多数软件都是可视化的，很容易上手，但是这并不代表 CLI（命令行）应用就没有用武之地了，特别是对于开发人员来说，还是会经常和 CLI 应用打交道。而 Golang 就非常适合用来构建 CLI 应用，下面我们就将来介绍如何在 Golang 中构建一个 CLI 应用。</p>
<p>对于开发人员来说平时可能就需要使用到很多 CLI 工具，比如 npm、node、go、python、docker、kubectl 等等，因为这些工具非常小巧、没有依赖性、非常适合系统管理或者一些自动化任务等等。</p>
<p>我们这里选择使用 Golang 里面非常有名的 <a href="https://github.com/spf13/cobra">Cobra</a> 库来进行 CLI 工具的开发。Cobra 是一个功能强大的现代化 CLI 应用程序库，有很多知名的 Go 项目使用 Cobra 进行构建，比如：Kubernetes、Docker、Hugo 等等</p>
<h2 id="概念">概念</h2>
<p>Cobra 是构建在命令、参数和标识符之上的：</p>
<ul>
<li><code>Commands</code> 表示执行动作</li>
<li><code>Args</code> 就是执行参数</li>
<li><code>Flags</code> 是这些动作的标识符</li>
</ul>
<p>基本的执行命令如下所示：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">$ APPNAME Command Args --Flags 
<span style="color:#6272a4"># 或者</span>
$ APPNAME Command --Flags Args
</code></pre></div><p>比如我们平时使用的一些命令行工具：</p>
<ul>
<li>git clone URL -bare</li>
<li>go get -u URL</li>
<li>npm install package &ndash;save</li>
<li>kubectl get pods -n kube-system -l app=cobra</li>
</ul>
<h2 id="示例">示例</h2>
<p>下面我们来看下 Cobra 的使用，这里我们使用的 go1.13.3 版本，使用 Go Modules 来进行包管理，如果对这部分知识点不熟悉的，可以查看前面我们的文章 <a href="/post/go-modules-usage/">Go Modules 基本使用（视频）</a> 了解。</p>
<p>新建一个名为 <code>my-calc</code> 的目录作为项目目录，然后初始化 modules：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">$ mkdir my-calc <span style="color:#ff79c6">&amp;&amp;</span> <span style="color:#8be9fd;font-style:italic">cd</span> my-calc
<span style="color:#6272a4"># 如果 go modules 默认没有开启，需要执行 export GO111MODULE=on 开启</span>
$ go mod init my-calc
go: creating new go.mod: module my-calc
</code></pre></div><p>初始化完成后可以看到项目根目录下面多了一个 <code>go.mod</code> 的文件，现在我们还没有安装 <code>cobra</code> 库，执行下面的命令进行安装：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="color:#6272a4"># 强烈推荐配置该环境变量</span>
$ <span style="color:#8be9fd;font-style:italic">export</span> <span style="color:#8be9fd;font-style:italic">GOPROXY</span><span style="color:#ff79c6">=</span>https://goproxy.cn
$ go get -u github.com/spf13/cobra/cobra
</code></pre></div><p>安装成功后，现在我们可以使用 <code>cobra init</code> 命令来初始化 CLI 应用的脚手架：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">$ cobra init --pkg-name my-calc
Your Cobra applicaton is ready at
/Users/ych/devs/workspace/youdianzhishi/course/my-calc
</code></pre></div><p>需要注意的是新版本的 cobra 库需要提供一个 <code>--pkg-name</code> 参数来进行初始化，也就是指定上面我们初始化的模块名称即可。上面的 init 命令就会创建出一个最基本的 CLI 应用项目：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">$ tree .
.
├── LICENSE
├── cmd
│   └── root.go
├── go.mod
├── go.sum
└── main.go

<span style="color:#bd93f9">1</span> directory, <span style="color:#bd93f9">5</span> files
</code></pre></div><p>其中 <code>main.go</code> 是 CLI 应用的入口，在 <code>main.go</code> 里面调用好了 <code>cmd/root.go</code> 下面的 <code>Execute</code> 函数：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#6272a4">// main.go
</span><span style="color:#6272a4"></span><span style="color:#ff79c6">package</span> main

<span style="color:#ff79c6">import</span> <span style="color:#f1fa8c">&#34;my-calc/cmd&#34;</span>

<span style="color:#8be9fd;font-style:italic">func</span> <span style="color:#50fa7b">main</span>() {
	cmd.<span style="color:#50fa7b">Execute</span>()
}
</code></pre></div><p>然后我们再来看下 <code>cmd/root.go</code> 文件。</p>
<h3 id="rootcmd">rootCmd</h3>
<p>root（根）命令是 CLI 工具的最基本的命令，比如对于我们前面使用的 <code>go get URL</code>，其中 <code>go</code> 就是 root 命令，而 <code>get</code> 就是 <code>go</code> 这个根命令的子命令，而在 <code>root.go</code> 中就直接使用了 cobra 命令来初始化 <code>rootCmd</code> 结构，CLI 中的其他所有命令都将是 <code>rootCmd</code> 这个根命令的子命令了。</p>
<p>这里我们将 <code>cmd/root.go</code> 里面的 <code>rootCmd</code> 变量内部的注释去掉，并在 <code>Run</code> 函数里面加上一句 <code>fmt.Println(&quot;Hello Cobra CLI&quot;) </code>：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#8be9fd;font-style:italic">var</span> rootCmd = <span style="color:#ff79c6">&amp;</span>cobra.Command{
	Use:   <span style="color:#f1fa8c">&#34;my-calc&#34;</span>,
	Short: <span style="color:#f1fa8c">&#34;A brief description of your application&#34;</span>,
	Long: <span style="color:#f1fa8c">`A longer description that spans multiple lines and likely contains
</span><span style="color:#f1fa8c">examples and usage of using your application. For example:
</span><span style="color:#f1fa8c">
</span><span style="color:#f1fa8c">Cobra is a CLI library for Go that empowers applications.
</span><span style="color:#f1fa8c">This application is a tool to generate the needed files
</span><span style="color:#f1fa8c">to quickly create a Cobra application.`</span>,
	Run: <span style="color:#8be9fd;font-style:italic">func</span>(cmd <span style="color:#ff79c6">*</span>cobra.Command, args []<span style="color:#8be9fd">string</span>) {
        fmt.<span style="color:#50fa7b">Println</span>(<span style="color:#f1fa8c">&#34;Hello Cobra CLI&#34;</span>)
    },
}
</code></pre></div><p>这个时候我们在项目根目录下面执行如下命令进行构建：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">$ go build -o my-calc
</code></pre></div><p>该命令会在项目根目录下生成一个名为 <code>my-calc</code> 的二进制文件，直接执行这个二进制文件可以看到如下所示的输出信息：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">$ ./my-calc
Hello Cobra CLI
</code></pre></div><h3 id="init">init</h3>
<p>我们知道 <code>init</code> 函数是 Golang 中初始化包的时候第一个调用的函数。在 <code>cmd/root.go</code> 中我们可以看到 <code>init</code> 函数中调用了 <code>cobra.OnInitialize(initConfig)</code>，也就是每当执行或者调用命令的时候，它都会先执行 <code>init</code> 函数中的所有函数，然后再执行 <code>execute</code> 方法。该初始化可用于加载配置文件或用于构造函数等等，这完全依赖于我们应用的实际情况。</p>
<p>在初始化函数里面 <code>cobra.OnInitialize(initConfig)</code> 调用了 <code>initConfig</code> 这个函数，所有，当 <code>rootCmd</code> 的执行方法 <code>RUN: func</code> 运行的时候，<code>rootCmd</code> 根命令就会首先运行 <code>initConfig</code> 函数，当所有的初始化函数执行完成后，才会执行 <code>rootCmd</code> 的 <code>RUN: func</code> 执行函数。</p>
<p>我们可以在 <code>initConfig</code> 函数里面添加一些 Debug 信息：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#8be9fd;font-style:italic">func</span> <span style="color:#50fa7b">initConfig</span>() {
    fmt.<span style="color:#50fa7b">Println</span>(<span style="color:#f1fa8c">&#34;I&#39;m inside initConfig function in cmd/root.go&#34;</span>)
    <span style="color:#ff79c6">...</span>
}
</code></pre></div><p>然后同样重新构建一次再执行：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">$ go build -o my-calc
$ ./my-calc 
I&#39;m inside initConfig <span style="color:#ff79c6">function</span> in cmd/root.go
Hello Cobra CLI
</code></pre></div><p>可以看到是首先运行的是 <code>initConfig</code> 函数里面的信息，然后才是真正的执行函数里面的内容。</p>
<p>为了搞清楚整个 CLI 执行的流程，我们在 <code>main.go</code> 里面也添加一些 Debug 信息：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#6272a4">// cmd/root.go
</span><span style="color:#6272a4"></span><span style="color:#8be9fd;font-style:italic">func</span> <span style="color:#50fa7b">init</span>() {
    fmt.<span style="color:#50fa7b">Println</span>(<span style="color:#f1fa8c">&#34;I&#39;m inside init function in cmd/root.go&#34;</span>)
    cobra.<span style="color:#50fa7b">OnInitialize</span>(initConfig)
    <span style="color:#ff79c6">...</span>
}

<span style="color:#8be9fd;font-style:italic">func</span> <span style="color:#50fa7b">initConfig</span>() {
    fmt.<span style="color:#50fa7b">Println</span>(<span style="color:#f1fa8c">&#34;I&#39;m inside initConfig function in cmd/root.go&#34;</span>)
    <span style="color:#ff79c6">...</span>
}

<span style="color:#6272a4">// main.go
</span><span style="color:#6272a4"></span><span style="color:#8be9fd;font-style:italic">func</span> <span style="color:#50fa7b">main</span>() {
     fmt.<span style="color:#50fa7b">Println</span>(<span style="color:#f1fa8c">&#34;I&#39;m inside main function in main.go&#34;</span>)
     cmd.<span style="color:#50fa7b">Execute</span>()
}
</code></pre></div><p>然后同样重新构建一次再执行：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">$ go build -o my-calc
$ ./my-calc 
I<span style="color:#f1fa8c">&#39;m inside init function in cmd/root.go
</span><span style="color:#f1fa8c">I&#39;</span>m inside main <span style="color:#ff79c6">function</span> in main.go
I&#39;m inside initConfig <span style="color:#ff79c6">function</span> in cmd/root.go
Hello Cobra CLI
</code></pre></div><p>根据上面的日志信息我们就可以了解到 CLI 命令的流程了。</p>
<p><code>init</code> 函数最后处理的就是 <code>flags</code> 了，<code>Flags</code> 就类似于命令的标识符，我们可以把他们看成是某种条件操作，在 Cobra 中提供了两种类型的标识符：<code>Persistent Flags</code> 和 <code>Local Flags</code>。</p>
<ul>
<li><code>Persistent Flags</code>: 该标志可用于为其分配的命令以及该命令的所有子命令。</li>
<li><code>Local Flags</code>: 该标志只能用于分配给它的命令。</li>
</ul>
<h3 id="initconfig">initConfig</h3>
<p>该函数主要用于在 home 目录下面设置一个名为 <code>.my-calc</code> 的配置文件，如果该文件存在则会使用这个配置文件。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#6272a4">// cmd/root.go
</span><span style="color:#6272a4">// initConfig 读取配置文件和环境变量
</span><span style="color:#6272a4"></span><span style="color:#8be9fd;font-style:italic">func</span> <span style="color:#50fa7b">initConfig</span>() {
	<span style="color:#ff79c6">if</span> cfgFile <span style="color:#ff79c6">!=</span> <span style="color:#f1fa8c">&#34;&#34;</span> {
        <span style="color:#6272a4">// 使用 flag 标志中传递的配置文件
</span><span style="color:#6272a4"></span>		viper.<span style="color:#50fa7b">SetConfigFile</span>(cfgFile)
	} <span style="color:#ff79c6">else</span> {
		<span style="color:#6272a4">// 获取 Home 目录
</span><span style="color:#6272a4"></span>		home, err <span style="color:#ff79c6">:=</span> homedir.<span style="color:#50fa7b">Dir</span>()
		<span style="color:#ff79c6">if</span> err <span style="color:#ff79c6">!=</span> <span style="color:#ff79c6">nil</span> {
			fmt.<span style="color:#50fa7b">Println</span>(err)
			os.<span style="color:#50fa7b">Exit</span>(<span style="color:#bd93f9">1</span>)
		}
		<span style="color:#6272a4">// 在 Home 目录下面查找名为 &#34;.my-calc&#34; 的配置文件
</span><span style="color:#6272a4"></span>		viper.<span style="color:#50fa7b">AddConfigPath</span>(home)
		viper.<span style="color:#50fa7b">SetConfigName</span>(<span style="color:#f1fa8c">&#34;.my-calc&#34;</span>)
	}
    <span style="color:#6272a4">// 读取匹配的环境变量
</span><span style="color:#6272a4"></span>	viper.<span style="color:#50fa7b">AutomaticEnv</span>()
	<span style="color:#6272a4">// 如果有配置文件，则读取它
</span><span style="color:#6272a4"></span>	<span style="color:#ff79c6">if</span> err <span style="color:#ff79c6">:=</span> viper.<span style="color:#50fa7b">ReadInConfig</span>(); err <span style="color:#ff79c6">==</span> <span style="color:#ff79c6">nil</span> {
		fmt.<span style="color:#50fa7b">Println</span>(<span style="color:#f1fa8c">&#34;Using config file:&#34;</span>, viper.<span style="color:#50fa7b">ConfigFileUsed</span>())
	}
}
</code></pre></div><p><code>viper</code> 是一个非常优秀的用于解决配置文件的 Golang 库，它可以从 JSON、TOML、YAML、HCL、envfile 以及 Java properties 配置文件中读取信息，功能非常强大，而且不仅仅是读取配置这么简单，了解更多相关信息可以查看 Git 仓库相关介绍：<a href="https://github.com/spf13/viper">https://github.com/spf13/viper</a>。</p>
<p>现在我们可以去掉前面我们添加的一些打印语句，我们已经创建了一个 <code>my-calc</code> 命令作为 <code>rootCmd</code> 命令，执行该根命令会打印 <code>Hello Cobra CLI</code> 信息，接下来为我们的 CLI 应用添加一些其他的命令。</p>
<h3 id="添加数据">添加数据</h3>
<p>在项目根目录下面创建一个名为 <code>add</code> 的命令，<code>Cobra</code> 添加一个新的命令的方式为：<code>cobra add &lt;commandName&gt;</code>，所以我们这里直接这样执行：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">$ cobra add add
add created at /Users/ych/devs/workspace/youdianzhishi/course/my-calc
$ tree .
.
├── LICENSE
├── cmd
│   ├── add.go
│   └── root.go
├── go.mod
├── go.sum
├── main.go
└── my-calc

<span style="color:#bd93f9">1</span> directory, <span style="color:#bd93f9">7</span> files
</code></pre></div><p>现在我们可以看到 <code>cmd/root.go</code> 文件中新增了一个 <code>add.go</code> 的文件，我们仔细观察可以发现该文件和 <code>cmd/root.go</code> 比较类似。首先是声明了一个名为 <code>addCmd</code> 的结构体变量，类型为 <code>*cobra.Command</code> 指针类型，<code>*cobra.Command</code> 有一个 <code>RUN</code> 函数，带有 <code>*cobra.Command</code> 指针和一个字符串切片参数。</p>
<p>然后在 <code>init</code> 函数中进行初始化，初始化后，将其添加到 <code>rootCmd</code> 根命令中 <code>rootCmd.AddCommand(addCmd)</code>，所以我们可以把 <code>addCmd</code> 看成是 <code>rootCmd</code> 的子命令。</p>
<p>同样现在重新构建应用再执行:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">$ go build -o my-calc
$ ./my-calc 
Hello Cobra CLI
$ ./my-calc add
add called
</code></pre></div><p>可以看到 <code>add</code> 命令可以正常运行了，接下来我们来让改命令支持添加一些数字，我们知道在 <code>RUN</code> 函数中是用户字符串 slice 来作为参数的，所以要支持添加数字，我们首先需要将字符串转换为 int 类型，返回返回计算结果。</p>
<!-- raw HTML omitted -->
<p>在 <code>cmd/add.go</code> 文件中添加一个名为 <code>intAdd</code> 的函数，定义如下所示：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#6272a4">// cmd/add.go
</span><span style="color:#6272a4"></span><span style="color:#8be9fd;font-style:italic">func</span> <span style="color:#50fa7b">intAdd</span>(args []<span style="color:#8be9fd">string</span>) {
	<span style="color:#8be9fd;font-style:italic">var</span> sum <span style="color:#8be9fd">int</span>
	<span style="color:#6272a4">// 循环 args 参数，循环的第一个值为 args 的索引，这里我们不需要，所以用 _ 忽略掉
</span><span style="color:#6272a4"></span>	<span style="color:#ff79c6">for</span> _, ival <span style="color:#ff79c6">:=</span> <span style="color:#ff79c6">range</span> args {
		<span style="color:#6272a4">// 将 string 转换成 int 类型
</span><span style="color:#6272a4"></span>		temp, err <span style="color:#ff79c6">:=</span> strconv.<span style="color:#50fa7b">Atoi</span>(ival)
		<span style="color:#ff79c6">if</span> err <span style="color:#ff79c6">!=</span> <span style="color:#ff79c6">nil</span> {
			<span style="color:#8be9fd;font-style:italic">panic</span>(err)
		}
		sum = sum <span style="color:#ff79c6">+</span> temp
	}
	fmt.<span style="color:#50fa7b">Printf</span>(<span style="color:#f1fa8c">&#34;Addition of numbers %s is %d\n&#34;</span>, args, sum)
}
</code></pre></div><p>然后在 <code>addCmd</code> 变量中，更新 <code>RUN</code> 函数，移除默认的打印信息，调用上面声明的 <code>addInt</code> 函数：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#6272a4">// addCmd
</span><span style="color:#6272a4"></span>Run: <span style="color:#8be9fd;font-style:italic">func</span>(cmd <span style="color:#ff79c6">*</span>cobra.Command, args []<span style="color:#8be9fd">string</span>) {
    <span style="color:#50fa7b">intAdd</span>(args)
},
</code></pre></div><p>然后重新构建应用执行如下所示的命令：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">$ go build -o my-calc
$ ./my-calc 
Hello Cobra CLI
<span style="color:#6272a4"># 注意参数之间的空格</span>
$ ./my-calc add <span style="color:#bd93f9">1</span> <span style="color:#bd93f9">2</span> <span style="color:#bd93f9">3</span>
Addition of numbers <span style="color:#ff79c6">[</span><span style="color:#bd93f9">1</span> <span style="color:#bd93f9">2</span> 3<span style="color:#ff79c6">]</span> is <span style="color:#bd93f9">6</span>
</code></pre></div><p>由于 <code>RUN</code> 函数中的 <code>args</code> 参数是一个字符串切片，所以我们可以传递任意数量的参数，但是确有一个缺陷，就是只能进行整数计算，不能计算小数，比如我们执行如下的计算就会直接 panic 了:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">$ ./my-calc add <span style="color:#bd93f9">1</span> <span style="color:#bd93f9">2</span> 3.5
panic: strconv.Atoi: parsing <span style="color:#f1fa8c">&#34;3.5&#34;</span>: invalid syntax

goroutine <span style="color:#bd93f9">1</span> <span style="color:#ff79c6">[</span>running<span style="color:#ff79c6">]</span>:
my-calc/cmd.intAdd<span style="color:#ff79c6">(</span>0xc0000a5890, 0x3, 0x3<span style="color:#ff79c6">)</span>
......
</code></pre></div><p>因为在 <code>intAdd</code> 函数里面，我们只是将字符串转换成了 int，而不是 float32/64 类型，所以我们可以为 <code>addCmd</code> 命令添加一个 <code>flag</code> 标识符，通过该标识符来帮助 CLI 确定它是 int 计算还是 float 计算。</p>
<p>在 <code>cmd/add.go</code> 文件的 <code>init</code> 函数内部，我们创建一个 Bool 类型的本地标识符，命名成 <code>float</code>，简写成 <code>f</code>，默认值为 false。这个默认值是非常重要的，意思就是即使没有在命令行中调用 flag 标识符，该标识符的值就将为 false。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#6272a4">// cmd/add.go
</span><span style="color:#6272a4"></span><span style="color:#8be9fd;font-style:italic">func</span> <span style="color:#50fa7b">init</span>() {
	rootCmd.<span style="color:#50fa7b">AddCommand</span>(addCmd)
	addCmd.<span style="color:#50fa7b">Flags</span>().<span style="color:#50fa7b">BoolP</span>(<span style="color:#f1fa8c">&#34;float&#34;</span>, <span style="color:#f1fa8c">&#34;f&#34;</span>, <span style="color:#ff79c6">false</span>, <span style="color:#f1fa8c">&#34;Add Floating Numbers&#34;</span>)
}
</code></pre></div><p>然后创建一个 <code>floatAdd</code> 的函数：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#8be9fd;font-style:italic">func</span> <span style="color:#50fa7b">floatAdd</span>(args []<span style="color:#8be9fd">string</span>) {
	<span style="color:#8be9fd;font-style:italic">var</span> sum <span style="color:#8be9fd">float64</span>
	<span style="color:#ff79c6">for</span> _, fval <span style="color:#ff79c6">:=</span> <span style="color:#ff79c6">range</span> args {
		<span style="color:#6272a4">// 将字符串转换成 float64 类型
</span><span style="color:#6272a4"></span>		temp, err <span style="color:#ff79c6">:=</span> strconv.<span style="color:#50fa7b">ParseFloat</span>(fval, <span style="color:#bd93f9">64</span>)
		<span style="color:#ff79c6">if</span> err <span style="color:#ff79c6">!=</span> <span style="color:#ff79c6">nil</span> {
			<span style="color:#8be9fd;font-style:italic">panic</span>(err)
		}
		sum = sum <span style="color:#ff79c6">+</span> temp
	}
	fmt.<span style="color:#50fa7b">Printf</span>(<span style="color:#f1fa8c">&#34;Sum of floating numbers %s is %f\n&#34;</span>, args, sum)
}
</code></pre></div><p>该函数和上面的 <code>intAdd</code> 函数几乎是相同的，除了是将字符串转换成 float64 类型。然后在 <code>addCmd</code> 的 <code>RUN</code> 函数中，我们根据传入的标识符来判断到底应该是调用 <code>intAdd</code> 还是 <code>floatAdd</code>，如果传递了 <code>--float</code> 或者 <code>-f</code> 标志，就将会调用 <code>floatAdd</code> 函数。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#6272a4">// cmd/add.go
</span><span style="color:#6272a4">// addCmd
</span><span style="color:#6272a4"></span>Run: <span style="color:#8be9fd;font-style:italic">func</span>(cmd <span style="color:#ff79c6">*</span>cobra.Command, args []<span style="color:#8be9fd">string</span>) {
    <span style="color:#6272a4">// 获取 float 标识符的值，默认为 false
</span><span style="color:#6272a4"></span>    fstatus, _ <span style="color:#ff79c6">:=</span> cmd.<span style="color:#50fa7b">Flags</span>().<span style="color:#50fa7b">GetBool</span>(<span style="color:#f1fa8c">&#34;float&#34;</span>)
    <span style="color:#ff79c6">if</span> fstatus { <span style="color:#6272a4">// 如果为 true，则调用 floatAdd 函数
</span><span style="color:#6272a4"></span>        <span style="color:#50fa7b">floatAdd</span>(args)
    } <span style="color:#ff79c6">else</span> {
        <span style="color:#50fa7b">intAdd</span>(args)
    }
},
</code></pre></div><p>现在重新编译构建 CLI 应用，按照如下方式执行：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">$ go build -o my-calc  
$ ./my-calc add <span style="color:#bd93f9">1</span> <span style="color:#bd93f9">2</span> <span style="color:#bd93f9">3</span>
Addition of numbers <span style="color:#ff79c6">[</span><span style="color:#bd93f9">1</span> <span style="color:#bd93f9">2</span> 3<span style="color:#ff79c6">]</span> is <span style="color:#bd93f9">6</span>
$ ./my-calc add <span style="color:#bd93f9">1</span> <span style="color:#bd93f9">2</span> 3.5 -f
Sum of floating numbers <span style="color:#ff79c6">[</span><span style="color:#bd93f9">1</span> <span style="color:#bd93f9">2</span> 3.5<span style="color:#ff79c6">]</span> is 6.500000
$./my-calc add <span style="color:#bd93f9">1</span> <span style="color:#bd93f9">2</span> 3.5 --float
Sum of floating numbers <span style="color:#ff79c6">[</span><span style="color:#bd93f9">1</span> <span style="color:#bd93f9">2</span> 3.5<span style="color:#ff79c6">]</span> is 6.500000
</code></pre></div><p>然后接下来我们在给 <code>addCmd</code> 添加一些子命令来扩展它。</p>
<h3 id="添加偶数">添加偶数</h3>
<p>同样在项目根目录下执行如下命令添加一个名为 <code>even</code> 的命令：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">$ cobra add even
even created at /Users/ych/devs/workspace/youdianzhishi/course/my-calc
</code></pre></div><p>和上面一样会在 <code>root</code> 目录下面新增一个名为 <code>even.go</code> 的文件，修改该文件中的 <code>init</code> 函数，将 <code>rootCmd</code> 修改为 <code>addCmd</code>，因为我们是为 <code>addCmd</code> 添加子命令:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#6272a4">// cmd/even.go
</span><span style="color:#6272a4"></span><span style="color:#8be9fd;font-style:italic">func</span> <span style="color:#50fa7b">init</span>() {
	addCmd.<span style="color:#50fa7b">AddCommand</span>(evenCmd)
}
</code></pre></div><p>然后更新 <code>evenCmd</code> 结构体参数的 <code>RUN</code> 函数:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#6272a4">// cmd/even.go
</span><span style="color:#6272a4"></span>Run: <span style="color:#8be9fd;font-style:italic">func</span>(cmd <span style="color:#ff79c6">*</span>cobra.Command, args []<span style="color:#8be9fd">string</span>) {
    <span style="color:#8be9fd;font-style:italic">var</span> evenSum <span style="color:#8be9fd">int</span>
    <span style="color:#ff79c6">for</span> _, ival <span style="color:#ff79c6">:=</span> <span style="color:#ff79c6">range</span> args {
        temp, _ <span style="color:#ff79c6">:=</span> strconv.<span style="color:#50fa7b">Atoi</span>(ival)
        <span style="color:#ff79c6">if</span> temp<span style="color:#ff79c6">%</span><span style="color:#bd93f9">2</span> <span style="color:#ff79c6">==</span> <span style="color:#bd93f9">0</span> {
            evenSum = evenSum <span style="color:#ff79c6">+</span> temp
        }
    }
    fmt.<span style="color:#50fa7b">Printf</span>(<span style="color:#f1fa8c">&#34;The even addition of %s is %d\n&#34;</span>, args, evenSum)
},
</code></pre></div><p>首先将字符串转换成整数，然后判断如果是偶数才进行累加。然后重新编译构建应用:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">$ go build -o my-calc
$ ./my-calc add even <span style="color:#bd93f9">1</span> <span style="color:#bd93f9">2</span> <span style="color:#bd93f9">3</span> <span style="color:#bd93f9">4</span> <span style="color:#bd93f9">5</span> <span style="color:#bd93f9">6</span>
The even addition of <span style="color:#ff79c6">[</span><span style="color:#bd93f9">1</span> <span style="color:#bd93f9">2</span> <span style="color:#bd93f9">3</span> <span style="color:#bd93f9">4</span> <span style="color:#bd93f9">5</span> 6<span style="color:#ff79c6">]</span> is <span style="color:#bd93f9">12</span>
</code></pre></div><p><code>my-calc</code> 是我们的根命令，<code>add</code> 是 <code>rootCmd</code> 的子命令，<code>even</code> 优势 <code>addCmd</code> 的子命令，所以按照上面的方式调用。可以用同样的方式再去添加一个奇数相加的子命令。</p>
<p>到这里我们就在 Golang 里面使用 <code>Cobra</code> 创建了一个简单的 CLI 应用。本文的内容虽然比较简单，但是是我们了解学习 <code>Cobra</code> 基础的一个很好的入门方式，后续我们也可以尝试添加一些更加复杂的使用案例。</p>
<h2 id="参考资料">参考资料</h2>
<ul>
<li><a href="https://github.com/spf13/cobra">https://github.com/spf13/cobra</a></li>
<li><a href="https://github.com/spf13/viper">https://github.com/spf13/viper</a></li>
<li><a href="https://schadokar.dev/posts/how-to-create-a-cli-in-golang-with-cobra/">How to create a CLI in golang with cobra</a></li>
</ul>
<!-- raw HTML omitted -->

                
                
<div class="entry-shang text-center">
    
	    <p> 「如果这篇文章对你有用,请随意打赏」</p>
	
	<button class="zs show-zs btn btn-bred">赞赏支持</button>
</div>
<div class="zs-modal-bg"></div>
<div class="zs-modal-box">
	<div class="zs-modal-head">
		<button type="button" class="close">×</button>
		<span class="author"><a href="https://qnxr.xyz"><img src="/img/favicon.png" />青年夏日IT</a></span>
        
	        <p class="tip"><i></i><span>如果这篇文章对你有用,请随意打赏</span></p>
		
 
	</div>
	<div class="zs-modal-body">
		<div class="zs-modal-btns">
			<button class="btn btn-blink" data-num="2">2元</button>
			<button class="btn btn-blink" data-num="5">5元</button>
			<button class="btn btn-blink" data-num="10">10元</button>
			<button class="btn btn-blink" data-num="50">50元</button>
			<button class="btn btn-blink" data-num="100">100元</button>
			<button class="btn btn-blink" data-num="1">任意金额</button>
		</div>
		<div class="zs-modal-pay">
			<button class="btn btn-bred" id="pay-text">2元</button>
			<p>使用<span id="pay-type">微信</span>扫描二维码完成支付</p>
			<img src="/img/reward/wechat-2.png"  id="pay-image"/>
		</div>
	</div>
	<div class="zs-modal-footer">
		<label><input type="radio" name="zs-type" value="wechat" class="zs-type" checked="checked"><span ><span class="zs-wechat"><img src="/img/reward/wechat-btn.png"/></span></label>
		<label><input type="radio" name="zs-type" value="alipay" class="zs-type" class="zs-alipay"><img src="/img/reward/alipay-btn.png"/></span></label>
	</div>
</div>
<script type="text/javascript" src="/js/reward.js"></script>

                

                <hr>
                <ul class="pager">
                    
                    <li class="previous">
                        <a href="/post/changelog/" data-toggle="tooltip" data-placement="top" title="优点知识更新日志">&larr;
                            Previous Post</a>
                    </li>
                    
                    
                    <li class="next">
                        <a href="/post/k8s-ui-kubevious/" data-toggle="tooltip" data-placement="top" title="带时光机的 Kubernetes Dashboard - Kubevious">Next
                            Post &rarr;</a>
                    </li>
                    
                </ul>

                
<div id="disqus-comment"></div>



            </div>
            
            <div class="
                col-lg-11 col-lg-offset-1
                col-md-10 col-md-offset-1
                sidebar-container">

                
                
                <section>
                    <hr class="hidden-sm hidden-xs">
                    <h5><a href="/tags/">标签</a></h5>
                    <div class="tags">
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        <a href="/tags/affinity" title="affinity">
                            affinity
                        </a>
                        
                        
                        
                        
                        
                        <a href="/tags/alertmanager" title="alertmanager">
                            alertmanager
                        </a>
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        <a href="/tags/argo" title="argo">
                            argo
                        </a>
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        <a href="/tags/cd" title="cd">
                            cd
                        </a>
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        <a href="/tags/ci" title="ci">
                            ci
                        </a>
                        
                        
                        
                        <a href="/tags/ci/cd" title="ci/cd">
                            ci/cd
                        </a>
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        <a href="/tags/configmap" title="configmap">
                            configmap
                        </a>
                        
                        
                        
                        
                        
                        <a href="/tags/coredns" title="coredns">
                            coredns
                        </a>
                        
                        
                        
                        
                        
                        
                        
                        <a href="/tags/dashboard" title="dashboard">
                            dashboard
                        </a>
                        
                        
                        
                        <a href="/tags/deployment" title="deployment">
                            deployment
                        </a>
                        
                        
                        
                        
                        
                        <a href="/tags/devops" title="devops">
                            devops
                        </a>
                        
                        
                        
                        
                        
                        <a href="/tags/django" title="django">
                            django
                        </a>
                        
                        
                        
                        
                        
                        
                        
                        <a href="/tags/docker" title="docker">
                            docker
                        </a>
                        
                        
                        
                        <a href="/tags/dockerfile" title="dockerfile">
                            dockerfile
                        </a>
                        
                        
                        
                        
                        
                        <a href="/tags/drone" title="drone">
                            drone
                        </a>
                        
                        
                        
                        <a href="/tags/efk" title="efk">
                            efk
                        </a>
                        
                        
                        
                        <a href="/tags/elastic" title="elastic">
                            elastic
                        </a>
                        
                        
                        
                        <a href="/tags/elasticsearch" title="elasticsearch">
                            elasticsearch
                        </a>
                        
                        
                        
                        
                        
                        <a href="/tags/envoy" title="envoy">
                            envoy
                        </a>
                        
                        
                        
                        
                        
                        
                        
                        <a href="/tags/flask" title="flask">
                            flask
                        </a>
                        
                        
                        
                        <a href="/tags/fluentd" title="fluentd">
                            fluentd
                        </a>
                        
                        
                        
                        
                        
                        <a href="/tags/github" title="github">
                            github
                        </a>
                        
                        
                        
                        <a href="/tags/gitlab" title="gitlab">
                            gitlab
                        </a>
                        
                        
                        
                        
                        
                        <a href="/tags/gitops" title="gitops">
                            gitops
                        </a>
                        
                        
                        
                        
                        
                        
                        
                        <a href="/tags/goland" title="goland">
                            goland
                        </a>
                        
                        
                        
                        <a href="/tags/golang" title="golang">
                            golang
                        </a>
                        
                        
                        
                        <a href="/tags/grafana" title="grafana">
                            grafana
                        </a>
                        
                        
                        
                        
                        
                        <a href="/tags/haproxy" title="haproxy">
                            haproxy
                        </a>
                        
                        
                        
                        <a href="/tags/harbor" title="harbor">
                            harbor
                        </a>
                        
                        
                        
                        <a href="/tags/helm" title="helm">
                            helm
                        </a>
                        
                        
                        
                        
                        
                        
                        
                        <a href="/tags/https" title="https">
                            https
                        </a>
                        
                        
                        
                        <a href="/tags/hugo" title="hugo">
                            hugo
                        </a>
                        
                        
                        
                        
                        
                        <a href="/tags/ingress" title="ingress">
                            ingress
                        </a>
                        
                        
                        
                        <a href="/tags/ingress-nginx" title="ingress-nginx">
                            ingress-nginx
                        </a>
                        
                        
                        
                        
                        
                        <a href="/tags/iptables" title="iptables">
                            iptables
                        </a>
                        
                        
                        
                        <a href="/tags/ipvs" title="ipvs">
                            ipvs
                        </a>
                        
                        
                        
                        <a href="/tags/istio" title="istio">
                            istio
                        </a>
                        
                        
                        
                        <a href="/tags/java" title="java">
                            java
                        </a>
                        
                        
                        
                        
                        
                        <a href="/tags/jenkins" title="jenkins">
                            jenkins
                        </a>
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        <a href="/tags/k8s" title="k8s">
                            k8s
                        </a>
                        
                        
                        
                        <a href="/tags/k8s%E6%8A%80%E6%9C%AF%E5%9C%88" title="k8s技术圈">
                            k8s技术圈
                        </a>
                        
                        
                        
                        <a href="/tags/kafka" title="kafka">
                            kafka
                        </a>
                        
                        
                        
                        
                        
                        <a href="/tags/kibana" title="kibana">
                            kibana
                        </a>
                        
                        
                        
                        <a href="/tags/kind" title="kind">
                            kind
                        </a>
                        
                        
                        
                        <a href="/tags/kong" title="kong">
                            kong
                        </a>
                        
                        
                        
                        <a href="/tags/kubeadm" title="kubeadm">
                            kubeadm
                        </a>
                        
                        
                        
                        
                        
                        <a href="/tags/kubelet" title="kubelet">
                            kubelet
                        </a>
                        
                        
                        
                        
                        
                        <a href="/tags/kubernetes" title="kubernetes">
                            kubernetes
                        </a>
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        <a href="/tags/kustomize" title="kustomize">
                            kustomize
                        </a>
                        
                        
                        
                        
                        
                        
                        
                        <a href="/tags/loki" title="loki">
                            loki
                        </a>
                        
                        
                        
                        <a href="/tags/mac" title="mac">
                            mac
                        </a>
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        <a href="/tags/microservice" title="microservice">
                            microservice
                        </a>
                        
                        
                        
                        <a href="/tags/monitor" title="monitor">
                            monitor
                        </a>
                        
                        
                        
                        
                        
                        <a href="/tags/netfilter" title="netfilter">
                            netfilter
                        </a>
                        
                        
                        
                        <a href="/tags/nfs" title="nfs">
                            nfs
                        </a>
                        
                        
                        
                        
                        
                        <a href="/tags/nginx" title="nginx">
                            nginx
                        </a>
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        <a href="/tags/operator" title="operator">
                            operator
                        </a>
                        
                        
                        
                        <a href="/tags/ops" title="ops">
                            ops
                        </a>
                        
                        
                        
                        
                        
                        
                        
                        <a href="/tags/pipeline" title="pipeline">
                            pipeline
                        </a>
                        
                        
                        
                        
                        
                        <a href="/tags/pod" title="pod">
                            pod
                        </a>
                        
                        
                        
                        
                        
                        <a href="/tags/prometheus" title="prometheus">
                            prometheus
                        </a>
                        
                        
                        
                        
                        
                        <a href="/tags/pv" title="pv">
                            pv
                        </a>
                        
                        
                        
                        <a href="/tags/pvc" title="pvc">
                            pvc
                        </a>
                        
                        
                        
                        <a href="/tags/pycharm" title="pycharm">
                            pycharm
                        </a>
                        
                        
                        
                        
                        
                        <a href="/tags/python" title="python">
                            python
                        </a>
                        
                        
                        
                        
                        
                        
                        
                        <a href="/tags/rbac" title="rbac">
                            rbac
                        </a>
                        
                        
                        
                        <a href="/tags/react" title="react">
                            react
                        </a>
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        <a href="/tags/scheduler" title="scheduler">
                            scheduler
                        </a>
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        <a href="/tags/security" title="security">
                            security
                        </a>
                        
                        
                        
                        <a href="/tags/service" title="service">
                            service
                        </a>
                        
                        
                        
                        <a href="/tags/service-api" title="service-api">
                            service-api
                        </a>
                        
                        
                        
                        <a href="/tags/service-mesh" title="service-mesh">
                            service-mesh
                        </a>
                        
                        
                        
                        
                        
                        
                        
                        <a href="/tags/slave" title="slave">
                            slave
                        </a>
                        
                        
                        
                        
                        
                        
                        
                        <a href="/tags/storageclass" title="storageclass">
                            storageclass
                        </a>
                        
                        
                        
                        
                        
                        <a href="/tags/tcpdump" title="tcpdump">
                            tcpdump
                        </a>
                        
                        
                        
                        <a href="/tags/tdd" title="tdd">
                            tdd
                        </a>
                        
                        
                        
                        <a href="/tags/tekton" title="tekton">
                            tekton
                        </a>
                        
                        
                        
                        <a href="/tags/tips" title="tips">
                            tips
                        </a>
                        
                        
                        
                        <a href="/tags/traefik" title="traefik">
                            traefik
                        </a>
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        <a href="/tags/vault" title="vault">
                            vault
                        </a>
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        <a href="/tags/vscode" title="vscode">
                            vscode
                        </a>
                        
                        
                        
                        
                        
                        
                        
                        <a href="/tags/webpack" title="webpack">
                            webpack
                        </a>
                        
                        
                        
                        <a href="/tags/websocket" title="websocket">
                            websocket
                        </a>
                        
                        
                        
                        
                        
                        <a href="/tags/wsl" title="wsl">
                            wsl
                        </a>
                        
                        
                        
                        <a href="/tags/yaml" title="yaml">
                            yaml
                        </a>
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        <a href="/tags/%E5%BE%AE%E6%9C%8D%E5%8A%A1" title="微服务">
                            微服务
                        </a>
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        <a href="/tags/%E7%9F%A5%E8%AF%86%E6%98%9F%E7%90%83" title="知识星球">
                            知识星球
                        </a>
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        <a href="/tags/%E8%AF%BE%E7%A8%8B" title="课程">
                            课程
                        </a>
                        
                        
                        
                        <a href="/tags/%E8%B0%83%E5%BA%A6" title="调度">
                            调度
                        </a>
                        
                        
                        
                        <a href="/tags/%E9%98%BF%E9%87%8C%E4%BA%91" title="阿里云">
                            阿里云
                        </a>
                        
                        
                        
                        
                        
                        
                    </div>
                </section>
                

                
                
            </div>
        </div>
    </div>
</article>




<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                   
                    
                    <li>
                        <a href="mailto:1290851757@qq.com">
                            <span class="fa-stack fa-lg">
                                <i class="fas fa-circle fa-stack-2x"></i>
                                <i class="fas fa-envelope fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
		    

                    
                    <li>
                        <a href="img/wechat_qrcode.jpg">
                            <span class="fa-stack fa-lg">
                                <i class="fas fa-circle fa-stack-2x"></i>
                                <i class="fab fa-twitter fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    

                    
                    <li>
                        <a target="_blank" href="img/wechat_qrcode.jpg">
                            <span class="fa-stack fa-lg">
                                <i class="fas fa-circle fa-stack-2x"></i>
                                <i class="fab fa-facebook fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
		    

		    
                    
                    
                    <li>
                        <a target="_blank" href="https://github.com/xiaobingchan">
                            <span class="fa-stack fa-lg">
                                <i class="fas fa-circle fa-stack-2x"></i>
                                <i class="fab fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
		    
                    
                    
                    
                    <li>
                        <a target="_blank" href="img/alipay.jpg">
                            <span class="fa-stack fa-lg">
                                <i class="fas fa-circle fa-stack-2x"></i>
                                <i class="fab fa-linkedin fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
		    
                    
                    
                    
                    
                    
            
            
            
                </ul>
		<p class="copyright text-muted">
                    Copyright &copy; 青年夏日IT 2021
                    <br>
                    <a href="https://themes.gohugo.io/hugo-theme-cleanwhite"></a><a href="http://qnxr.xyz">青年夏日IT版权所有</a> |
                    <iframe
                        style="margin-left: 2px; margin-bottom:-5px;"
                        frameborder="0" scrolling="0" width="100px" height="20px"
                        src="https://ghbtns.com/github-btn.html?user=xiaobingchan&repo=xiaobingchan.github.io&type=star&count=true" >
                    </iframe>
                </p>
            </div>
        </div>
    </div>
</footer>




<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>






<script>
    
    if($('#tag_cloud').length !== 0){
        async("/js/jquery.tagcloud.js",function(){
            $.fn.tagcloud.defaults = {
                
                color: {start: '#bbbbee', end: '#0085a1'},
            };
            $('#tag_cloud a').tagcloud();
        })
    }
</script>


<script>
    async("https://cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.js", function(){
        var $nav = document.querySelector("nav");
        if($nav) FastClick.attach($nav);
    })
</script>






<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-150373352-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>



</body>
</html>
